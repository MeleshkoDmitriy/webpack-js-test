import{getRandomIndex,checkUnique}from"./utils";const start=()=>{const e=+prompt("Enter number of digits");if(Number.isNaN(e)||e<2||e>9)return alert("Enter number between 2 and 9 inclusively"),void start();let t=[];const n=[1,2,3,4,5,6,7,8,9];for(let l=0;l<e;l++){const e=n.splice(-getRandomIndex(),1)[0];t.push(e)}const l=document.getElementById("guess"),r=document.getElementById("guessBtn"),o=document.getElementById("history"),i=document.getElementById("score"),u=document.getElementById("highscore");let d=[];const c=localStorage.getItem("highScore");c&&(u.innerText=c);let s=1e3*e;i.innerText=s,r.addEventListener("click",(()=>{if(+l.value.length==+e&&l.value.match(/\d/)&&!l.value.match(/0/)&&checkUnique(+l.value)){const e=document.createElement("tr"),n=document.createElement("td"),r=document.createElement("td"),[u,c]=juniorsAndSeniorsAlgorithm(t,[...l.value]);d.includes(l.value)?alert("This number already used"):(s>10*d.length&&(s-=10*d.length),i.innerText=s,d.push(l.value),n.innerText=l.value,r.innerText=`${u}J${c}S`,e.appendChild(n),e.appendChild(r),o.appendChild(e),l.value="")}else alert(`You should enter number with ${e} unique non-zero digits!`)}))},juniorsAndSeniorsAlgorithm=(e,t)=>{let n=0,l=0;for(let r=0;r<e.length;r++)+e[r]!=+t[r]?e.includes(+t[r])&&n++:l++;if(l===e.length){const e=document.getElementById("score");localStorage.setItem("highScore",+e.innerText),alert("You win!"),location.reload()}return[n,l]};start();